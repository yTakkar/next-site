import Layout from '~/components/Layout'
import AnswerBox from '~/components/AnswerBox'

export const meta = {
  title: 'Deploying a Next.js App',
  courseId: 'basics',
  lessonId: 'deploying-a-nextjs-app',
  stepId: 'run-two-instances',
  question: {
    answers: [
      'Yes, both http://localhost:8000 and http://localhost:9000',
      'Only http://localhost:8000',
      'Only http://localhost:9000',
      'Neither one'
    ],
    correctAnswer: 'Yes, both http://localhost:8000 and http://localhost:9000'
  }
}

## Run two instances

Now we are going to run two instances of our app. Usually, we do this to horizontally scale our app.
First of all, make the following changes to our start npm script:

```json
"scripts": {
  "start": "next start -p $PORT"
}
```

> If you are on Windows, your start script should be `next start -p %PORT%`.

Now let's build our app first.

```bash
npm run build
```

Then try to run the following commands, one by one (two sessions), in it's own terminal:

```
PORT=8000 npm start
PORT=9000 npm start
```

> On Windows, you will need to run the commands differently. One option is to install the npm module [`cross-env`](https://www.npmjs.com/package/cross-env) into your app.
> Then run these two commands from the command line: `cross-env PORT=8000 npm start` and `cross-env PORT=9000 npm start`

Is it possible to access our app on both ports?

export default ({ children }) => <Layout meta={meta}>{children}</Layout>
